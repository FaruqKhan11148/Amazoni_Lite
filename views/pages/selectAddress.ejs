    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>My Profile</title>

        <!--
        - favicon
    -->
        <link
        rel="shortcut icon"
        href="/assets/images/logo/favicon.ico"
        type="image/x-icon"
        />

        <!--
        - custom css link
    -->
    <link rel="stylesheet" href="/assets/css/style-prefix.css" />
    <link rel="stylesheet" href="/assets/css/style.css" />
    <link rel="stylesheet" href="/css/myCart.css" />
    <link rel="stylesheet" href="/assets/css/myProfileSidebar.css" />

    <link rel="stylesheet" href="/css/address.css" />

        

        <!--
        - google font link
    -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet"
        />
    </head>
    <body>
        <%- include("../partials/header") %>

        <section class="address-container">

            <h2>Select Delivery Address</h2>

            <div class="address-top">
                <a href="/api/addresses/new" class="add-address-btn">
                + Add New Address
                </a>
            </div>

            <% if (addresses.length === 0) { %>
                <p>No address found. Please add one.</p>
            <% } else { %>

            <form 
                action="<%= productId ? '/api/orders/checkout-single' : '/api/orders/checkout' %>" 
                method="POST"
                >
                <% if (productId) { %>
                    <input type="hidden" name="productId" value="<%= productId %>">
                <% } %>

                <% addresses.forEach(addr => { %>
                    <div class="address-card">
                    <div class="address-left">
                        <label class="radio-wrap">
                        <input
                            type="radio"
                            name="address_id"
                            value="<%= addr.id %>"
                            <%= addr.is_default ? "checked" : "" %>
                            required
                        />
                        <div>
                            <strong><%= addr.name %></strong>
                            <p><%= addr.address_line1 %></p>
                            <p><%= addr.city %>, <%= addr.state %> - <%= addr.pincode %></p>
                            <p><%= addr.phone %></p>
                        </div>
                        </label>
                    </div>

                    <div class="address-actions-btns">
                        <a href="/api/addresses/edit/<%= addr.id %>" class="edit-btn">Edit</a>
                        <button type="button" class="delete-btn" onclick="deleteAddress(<%= addr.id %>, this)">Delete</button>
                    </div>
                    </div>
                <% }) %>

                <div class="address-actions">
                    <button type="submit" class="checkout-btn">Continue to Checkout</button>
                </div>
                </form>
                
            <% } %>

        </section>



    <%- include("../partials/footer") %>
    
    <script src="/assets/js/script.js"></script>
    <script>
        function deleteAddress(id, btn) {
            fetch(`/api/addresses/delete/${id}`, {
                method: "POST"
            })
            .then(res => res.json())
            .then(() => {
                btn.closest(".address-card").remove();
            });
            }
    </script>


    <!--
    - ionicon link
  -->
    <script
      type="module"
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"
    ></script>
  </body>
</html>
